{
  // verbose
  "simulation": false,
  "print_timer": false,
  "use_canvas": true,

  // algorithmic-level knobs
  "integration_method": "PrinceDormand", // "PrinceDormand", "RK4", //, Fehlberg
  "use_OOS": false, // update with Out-Of-State features
  "use_depth_opt": true,  // depth optimization
  "use_MH_gating": true,
  "use_1pt_RANSAC": false,  
  "use_compression": true,  // measurement compression
  "compression_trigger_ratio": 1.5,
  "max_group_lifetime": 6,

  "PrinceDormand": {
    "control_stepsize": false,
    "tolerance": 1e-15,
    "attempts": 12,
    "min_scale_factor": 0.125,
    "max_scale_factor": 4.0,
    "stepsize": 0.002
  },

  "RK4": {
    "stepsize": 0.002
  },

  // memory
  "memory": {
    "max_features": 256,
    "max_groups": 256  // max groups should increase as allowed group lifetime increases
  },


  // gravity constant
  "gravity": [0, 0, -9.8],
  // Initial State
  "X" : {
    "W"   : [0, 0, 0],
    "T"   : [0, 0, 0],
    "V"   : [0, 0, 0],

    "bg"  : [-0.05163, 0.0108186, 0.0188156],
    "ba"  : [-0.00342173, -0.00861755, 0.0218768],
    "Wbc" : [[4.01e-02, -4.24e-02, 9.98e-01],
             [-9.99e-01, -2.05e-03, 4.00e-02],
             [3.50e-04, -9.99e-01, -4.25e-02]],
    "Tbc": [0.0737, -0.00977, -0.1088],
    "Wg"  : [0, 0, 0]
  },

  "P" : {
    "W"   : 0.0001,
    "T"   : 0.001,
    "V"   : 0.5,
    "bg"  : 0.001,
    "ba"  : 0.01,
    "Wbc" : 0.001,
    "Tbc" : 0.01,
    "Wg"  : 0.01
  },

  "Qmodel" : {
    "W"   : 0.000,
    "T"   : 0.0,
    "V"   : 0.0,
    "wb"  : 0.0000,
    "ab"  : 0.000,
    "Wbc" : 0.000,
    "Tbc" : 0.0,
    "Wg"  : 0.000
  },

  "Qimu": {
    "gyro": 24.0e-4,
    "gyro_bias": 6.6e-5,
    "accel": 4.2e-2,
    "accel_bias": 25.8e-4
  },


  // initial std on feature state
  "initial_z": 3.5, // meter
  "initial_std_x": 1.5, // pixel
  "initial_std_y": 1.5, // pixel
  "initial_std_z": 2.0,  // meter

  // std of visuale measurement, in pixels
  "visual_meas_std":  3.5,
  "subfilter_visual_meas_std":  3.5,
  "oos_meas_std": 3.5,
  "max_depth": 8.0,
  "min_depth": 0.05,


  // depth sub-filter setting
  "subfilter": {
    "ready_steps": 5,
    "MH_thresh": 8.991
  },

  "depth_opt": {
    "max_iters": 5,
    "eps": 1e-5,
    "damping_factor": 1e-3,
    "adjust_factor": 5.0,
    "max_res_norm": 5.0 // maximal norm of per observation residuals
  },

  "feature_P0_damping": 10.0,

  "imu_calib": {
    "Cas": [1.00056, 1.00062, 1.00136],
    "Car": [[1, -0.000914275, -0.000414882], 
            [0, 1, -0.0000350183], 
            [0, 0, 1]],
    "Cgs": [0.999823, 1.00412, 0.987355],
    "Cgr": [[1, -0.00224194, 0.0120628], 
            [0.00306442, 1, -0.000998032], 
            [0.00285738, -0.0154485, 1]]
  },
  "imu_init_counter": 20,

  "camera_cfg": {
    "model": "atan",
    "rows": 500, 
    "cols": 960,
    "fx": 0.561859, 
    "fy": 1.081848, 
    "cx": 0.491896, 
    "cy": 0.5151548, 
    "w": 0.709402, 
    "comment": "intrinsics converted from relative to absolute values"
  },

  "min_inliers": 5, // minimum number of inlier measurements

  "MH_thresh": 5.991, // 8.991
  "MH_adjust_factor": 1.5,

  "1pt_RANSAC_thresh": 1.5,
  "1pt_RANSAC_prob": 0.95,
  "1pt_RANSAC_Chi2": 5.89,

  "tracker_cfg": {
    "use_prediction": true,
    "mask_size": 15,
    "margin": 16, // image boundary to mask out
    "num_features_min": 60,
    "num_features_max": 90,
    "max_pixel_displacement": 128,
    "normalize": false,

    "KLT": {
      "win_size": 15,
      "max_level": 5,
      "max_iter": 15,
      "eps": 1e-2
    },

    "extract_descriptor": false,
    "descriptor_distance_thresh": -1, // -1 to disable descriptor check
    "default_descriptor": "BRIEF",

    // "detector": "BRISK",
    "detector": "FAST",
    // "detector": "ORB",
    // "detector": "AGAST",
    // "detector": "GFTT",

    "FAST": {
      // https://docs.opencv.org/3.4/df/d74/classcv_1_1FastFeatureDetector.html
      "threshold": 5,
      "nonmaxSuppression": true
    },

    "BRISK": {
      // https://docs.opencv.org/3.4/de/dbf/classcv_1_1BRISK.html
      "thresh": 25,
      "octaves": 3,
      "patternScale": 1.0
    },

    "ORB": {
      // https://docs.opencv.org/3.3.0/db/d95/classcv_1_1ORB.html
      "nfeatures": 500,
      "scaleFactor": 1.2,
      "nlevels": 4,
      "edgeThreshold": 31,
      "firstLevel": 0,
      "WTA_K": 2,
      "patchSize": 31,
      "fastThreshold": 20
    },

    "AGAST": {
      // https://docs.opencv.org/3.4/d7/d19/classcv_1_1AgastFeatureDetector.html
      "threshold": 10,
      "nonmaxSuppression": true
    },

    "GFTT": {
      // Good Feature To Track 
      // https://docs.opencv.org/3.3.0/df/d21/classcv_1_1GFTTDetector.html
      "maxCorners": 1000,
      "qualityLevel": 0.01,
      "minDistance": 1.0,
      "blockSize": 3,
      "useHarrisDetector": false,
      "k": 0.04
    },

    "BRIEF": {
      "bytes": 64,
      "use_orientation": false
    },

    "FREAK": {
      "orientationNormalized": true,
      "scaleNormalized": true,
      "patternScale": 22.0,
      "nOctaves": 4
    }
  } 

}
